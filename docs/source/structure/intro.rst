Introduction to the Structure 框架简介
===============================================

框架的组成部分
--------------------
我们设计了一个 AI 物理学家的框架，主要分为这几个部分：

**实验库**

由一系列物理实验构成，每个实验包含了实验的物理对象信息（包含哪些物理对象）、
输入条件（控制实验的各个参数，及其可调节的范围；输入参数包括实验所涉及的物理对象的信息）、
输出数据（通过各种观测手段获取的数据）。由于实验中存在系统误差和偶然误差，输出的数据是带有噪声的。

**概念库**

概念是物理表达式的组成原子，它决定了我们对表达式的搜索空间。概念主要分为基本概念、普通概念、内禀概念三大类。

1. 基本概念是实验直接观测到的物理量，
例如时间 :math:`t`、空间坐标 :math:`pos` 等。

2. 普通概念定义了表达式重写规则，例如 :math:`v_i \rightarrow \partial_t pos_i`，
:math:`\Delta x_{ij} \rightarrow pos_i - pos_j$，$p_i \rightarrow m_i \cdot v_i`，
:math:`\boldsymbol \nabla \cdot \boldsymbol A \rightarrow \partial_x {\boldsymbol A}_x + \partial_y {\boldsymbol A}_y + \partial_z {\boldsymbol A}_z` 等。
因此普通概念实际上是我们新定义的词汇（vocalbulary），
可以帮助我们用更简洁的语言描述物理规律，从而更容易从物理规律中洞察到其蕴含的数学结构，更有助于我们对物理定律作迁移和推广。

3. 内禀概念是一类特殊的概念，它是物体的内禀属性，
可以通过某一特定实验测量得到，例如质点的质量 :math:`mass`、电荷 :math:`e`，
弹簧的弹性系数 :math:`k`、原长 :math:`freeL` 等。

**模型库**

模型主要分为 Specific Model 和 General Model 两大类。

1. Specific Model 是特定实验中物理规律的描述，
它包含实验输出数据之间的各种关系（表达式的值在误差范围内守恒或等于 :math:`0`）。
此外 Specific Model 内置了一套代数化简系统，
利用 Rosenfeld Groebner 算法得到一组最小的关系集合，以及可以对表达式进行化简和概念的重新包装。

2. General Model 是 Specific Model 的推广，它包含了一些 Sentence（物理语句），
例如 :math:`\text{IsConserved}(\sum_i p_i)` 表示动量守恒。
:math:`\forall i, \text{IsZero}(m_i a_i + \sum_{j\neq i} F_{ji})` 表示牛顿第二定律。
这些物理语句所包含的表达式，可以在许多不同的实验中被验证，因此被认为是重要的物理定律。在一定范围内，它们是具有普适性的。

**理论家与主控流程**

理论家的一个主要职责是调度实验，获取实验数据，然后根据实验数据和概念库中的知识，
生成新的物理定律。工作流程大概如下：

1. 通过一定的策略，
从实验库中选择一个实验。

2. 在不同输入参数下获
取若干组实验数据。

3. 通过一定的策略，
从概念库中抽取一系列被认为与当前实验有关的概念。
例如 :math:`m_i, v_i, e_i`。

4. 通过一定的策略，给这些概念赋予具体的物理对象下标，
再经过组合与变换生成若干个候选单项式，例如 :math:`m_1 v_1, m_2 v_2` 等。
从 General Model 中也抽取一些表达式作为候选单项式，例如 :math:`\sum_{i} e_i` 等。

5. 根据实验数据计算这些单项式的值，寻找它们之间的非平凡关系，
例如在碰撞实验中发现 :math:`m_1 v_1 + m_2 v_2` 在误差范围内是守恒量。
在弹簧连接两质点的实验中发现 :math:`\sum_{i} e_i + k\cdot \Delta L^2`
在误差范围内是守恒量，这里的概念 :math:`\Delta L \rightarrow posr - posl - freeL`
是弹簧伸缩量。

6. 将寻找到的新的非平凡关系添加到 Specific Model 中，
排除冗余的关系。

7. 通过一定的策略，
将新找到的关系推广到更一般的形式 General Model
（即我们猜想这一条关系在其他实验中也有可能成立，或可以启发其他实验的物理规律发现）；
例如将 :math:`m_1 v_1 + m_2 v_2`
推广到 :math:`\sum_{i} m_i v_i`。

8. 通过一定的策略，从新找到的关系中定义出一系列新的概念，
例如，定义 :math:`p_i \rightarrow m_i v_i`，
从而新找到的 General Model 可以简写为 :math:`\sum_{i} p_i`。

9. 将新找到的概念保存到概念库中。
将新的模型保存到模型库中。

**理论家与内禀概念发现**
    
在理论家分析实验、生成单项式和计算表达式的过程中，还可以对数据作进一步的相关性分析。
在不同输入参数下进行多次实验 :math:`exp` 之后（即控制变量实验），
理论家发现表达式 :math:`expr` 的值不仅在误差范围内守恒，
而且只与实验输入参数中的某几个物理对象 :math:`obj_A,\cdots, obj_B` 的参数有关，
那么这个实验以及特定的表达式的计算可以被视作是一次“测量”。
虽然不能直接观测到物理对象 :math:`obj_A,\cdots, obj_B` 具有哪些属性，但是
能通过这一次测量间接地获知，在实验 `exp` 中，表达式 :math:`expr` 的值只依赖
于 :math:`obj_A,\cdots, obj_B` 的属性。
因此，理论家将这个测量方式的信息包装为一个内禀概念，并期待从内禀概念中发现物理对象的内在属性。

1. 如果 :math:`expr` 只依赖于一个物理对象 :math:`obj_A`，
那么这个测量是对物理对象 :math:`obj_A` 的内在属性的反映，可以定义新的单体内禀概念。

2. 如果 :math:`expr` 依赖于两个物理对象 :math:`obj_A, obj_B`，
那么可以固定物理对象 :math:`obj_A` 作为标准物体，
从而定义一个新的测量。那么这个测量可以被视作是对物理对象 :math:`obj_B` 的内在属性的反映，可以定义新的单体内禀概念。

这一模块在我们的程序中有更细致的讨论，例如利用流形分析判断从一个两体内禀概念是否可以提取出重要的单体内禀概念。


基本假设
------------------
在我们的项目中，为了方便测试，以及受限于目前 AI 的功能，我们对框架施加了
若干个假设：

1. 我们用
数值模拟设计了若干个一维实验。

2. 实验只涉及不可分割的不变的物理对象（例如小球、弹簧等）。
目前我们不支持可变的物理对象（例如流体、气体）。
这些物理对象是理想的，不会因实验而发生损坏。例如在我们的实验中，砝码不会因为碰撞实验而发生磨损。

3. 实验输出的偶然误差服从正态分布，
实验的系统误差远小于偶然误差。

4. 每个实验，对于一种输入参数取值会给出相应的输出数据。
当输入参数相同时，输出数据在误差范围内总是相同的（也就是说输入参数是完备的，在误差范围内这些输入参数决定了输出数据，因此实验可以被复现任意多次）。

5. 每个实验都设置了一个观察者，可以直接测得时间、空间坐标（相对于观察者参考系）。
因此时间、空间坐标是作为基本概念在概念库中出现。

6. 实验输出的所有数据都是关于时间 :math:`t` 的一个实值序列，序列中每个数据都是一个浮点数。
因此所有实验输出数据都可以看作是关于 :math:`t` 的实值函数。
并假设测量时间序列是等差序列，即 :math:`t_i = t_0 + i \cdot \Delta t`。

7. 实验在不同时间点观测的
数据点误差分布是独立的。

在满足以上假设的前提下，AI 物理学家可以从极少的先验知识出发，在不断循环的主控流程中，
发现数据中所蕴含的微分方程形式的物理规律，并在不断的学习过程中，
逐渐积累起越来越多的物理知识，总结出哪些是重要的物理概念，哪些是具有普适性的物理定律。

AI 的偏好
---------------------
引导 AI 物理学家发现物理概念的另一个重要偏好是，
AI 希望寻找到每个实验所描述的动力学系统中蕴含的守恒量，
这些守恒量不仅仅增进了我们对当前实验的理解，还可能启发我们在其他物理系统中寻找到类似的量，而后推广为普适的物理定律。在我们的程序实现中，
为了判断一条表达式是否在误差范围内是否守恒（或为 :math:`0`），
我们采用的方法是，重复若干次实验得到多组（共 `repeat_time` 组，我们设置了 `repeat_time=100`）独立重复观测数据，
计算这条表达式在每一次实验中计算得到的结果。然后，可以算出逐点平均值和逐点误差，
再利用 chi2test 检验它是否关于时间守恒（或为 :math:`0`）。


先验知识与框架表现
----------------------
我们给予 AI 物理学家的先验物理知识为

1. 世界是由一系列不可分割的物理对象构成的，
这些物理对象主要有质点 MassPoint、轻弹簧 Spring、重弹簧 HSpring 等等。

2. 观测者携带着两种测量工具：闹钟和尺子。它们可以分别用来测量时间和空间坐标，并且分别对应
两种量纲。

3. 质点的可观测量有 :math:`pos(t)` 代表质点坐标。弹簧的可观测量
有 :math:`posl(t), posr(t)` 分别代表左端点坐标、右端点坐标。

从这些先验知识出发，AI 物理学家可以调用实验库中的匀速直线运动实验、匀加速实验、
质点碰撞实验、弹簧运动实验、固定一端弹簧连接质点的振荡实验等等，
从实验数据中自主地发现物理概念：

.. math:: 

    v(t)\rightarrow \partial_t pos(t), a(t) \rightarrow \partial_t v(t)

发现内禀概念——质点的 :math:`mass`，弹簧的 :math:`freeL, k`，再进一步发现动量和能量概念

.. math::

    p \rightarrow m v(t), e \rightarrow m v(t)^2

同时发现概念之间的关系，总结出普适的物理定律，
例如动量守恒和能量守恒：

.. math::

    \text{IsConserved}\left(\sum_i p_i\right),\quad \text{IsConserved}\left(\sum_i e_i\right)

随着 AI 物理学家的进一步工作，我们期待它能够发现更多的物理概念和物理定律，例如在弹簧实验中可以进一步发现
弹性势能 :math:`k \cdot \Delta L^2`，发现牛顿第二定律：

.. math::

    \text{IsZero}\left(m a + k \Delta L\right)

进一步，发现质点弹簧系统中的能量守恒定律：

.. math::

    \text{IsConserved}\left(\sum_{i:\text{MassPoint}} e_i + \sum_{j:\text{Spring}} k_j \Delta L_j^2\right)
